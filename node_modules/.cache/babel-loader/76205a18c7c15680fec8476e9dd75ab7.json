{"ast":null,"code":"import Cookies from 'js-cookie';\nimport qs from 'qs';\nconst BASEAPI = process.env.REACT_APP_BASE_API;\n\nconst apiFetchGet = async (endpoint, body = {}) => {\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n\n    if (token) {\n      body.token = token;\n    }\n\n    ;\n  }\n\n  ;\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n\n  ;\n  return json;\n};\n\nconst apiFetchPost = async (endpoint, body) => {\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n\n    if (token) {\n      body.token = token;\n    }\n\n    ;\n  }\n\n  ;\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n\n  ;\n  return json;\n};\n\nconst apiFetchFile = async (endpoint, body) => {\n  const headers = {};\n\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n\n    if (token) {\n      headers.Authorization = `Bearer ${token}`;\n    }\n\n    ;\n  }\n\n  ;\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers,\n    body\n  });\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n\n  ;\n  return json;\n};\n\nconst OLXApi = () => ({\n  login: async (email, password) => {\n    const json = await apiFetchPost('/user/signin', {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, stateLoc, email, password, password_confirmation) => {\n    const json = await apiFetchPost('/user/signup', {\n      name,\n      email,\n      password,\n      password_confirmation,\n      state: stateLoc\n    });\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet('/states');\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet('/categories');\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet('/ad/list', options);\n    return json;\n  },\n  getAd: async (id, otherAds = false) => {\n    const json = await apiFetchGet('/ad/item', {\n      id,\n      other: otherAds\n    });\n    return json;\n  },\n  addAd: async fData => {\n    const json = await apiFetchFile('/ad/add', fData);\n    return json;\n  }\n});\n\n_c = OLXApi;\nexport default OLXApi;\n\nvar _c;\n\n$RefreshReg$(_c, \"OLXApi\");","map":{"version":3,"sources":["C:/Users/beatriz.araujo/Downloads/react-olx-main/src/helpers/OLXApi.js"],"names":["Cookies","qs","BASEAPI","process","env","REACT_APP_BASE_API","apiFetchGet","endpoint","body","token","undefined","get","res","fetch","stringify","json","notallowed","window","location","href","apiFetchPost","method","headers","Accept","JSON","apiFetchFile","Authorization","OLXApi","login","email","password","register","name","stateLoc","password_confirmation","state","getStates","states","getCategories","categories","getAds","options","getAd","id","otherAds","other","addAd","fData"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\nimport qs from 'qs';\n\nconst BASEAPI = process.env.REACT_APP_BASE_API;\n\nconst apiFetchGet = async (endpoint, body = {}) => {\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    };\n  };\n\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  };\n\n  return json;\n};\n\nconst apiFetchPost = async (endpoint, body) => {\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    };\n  };\n\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(body),\n  });\n\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  };\n\n  return json;\n};\n\nconst apiFetchFile = async (endpoint, body) => {\n  const headers = {};\n\n  if (body.token === undefined) {\n    const token = Cookies.get('token');\n    if (token) {\n      headers.Authorization = `Bearer ${token}`\n    };\n  };\n\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers,\n    body,\n  });\n\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  };\n\n  return json;\n};\n\nconst OLXApi = () => ({\n  login: async (email, password) => {\n    const json = await apiFetchPost(\n      '/user/signin', {\n        email,\n        password,\n      },\n    );\n    return json;\n  },\n  register: async (name, stateLoc, email, password, password_confirmation) => {\n    const json = await apiFetchPost(\n      '/user/signup', {\n        name,\n        email,\n        password,\n        password_confirmation,\n        state: stateLoc,\n      },\n    );\n\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet('/states');\n\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet('/categories');\n\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet(\n      '/ad/list',\n      options,\n    );\n\n    return json;\n  },\n  getAd: async (id, otherAds = false) => {\n    const json = await apiFetchGet(\n      '/ad/item',\n      {\n        id,\n        other: otherAds,\n      },\n    );\n    return json;\n  },\n  addAd: async fData => {\n    const json = await apiFetchFile(\n      '/ad/add',\n      fData,\n    );\n    return json;\n  },\n});\n\nexport default OLXApi;"]},"metadata":{},"sourceType":"module"}